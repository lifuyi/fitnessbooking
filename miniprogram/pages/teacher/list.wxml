<!-- teacher/list.wxml -->
<view class="container">
  <!-- è¯­è¨€åˆ‡æ¢ -->
  <view class="language-switch-container">
    <language-switch bind:languagechange="onLanguageChange"></language-switch>
  </view>
  
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="header-title">{{i18n.t('index.function.teachers')}}</text>
  </view>

  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filter-bar">
    <view class="filter-item">
      <text class="filter-label">{{i18n.t('course.dance.type')}}</text>
      <picker mode="selector" range="{{getDanceTypeOptions()}}" bindchange="switchDanceType">
        <view class="picker-value">
          {{getCurrentDanceTypeText()}}
          <text class="iconfont icon-arrow-down"></text>
        </view>
      </picker>
    </view>
    <view class="filter-item">
      <text class="filter-label">{{i18n.t('course.store')}}</text>
      <picker mode="selector" range="{{getStoreOptions()}}" bindchange="switchStore">
        <view class="picker-value">
          {{getCurrentStoreText()}}
          <text class="iconfont icon-arrow-down"></text>
        </view>
      </picker>
    </view>
  </view>

  <!-- å¯¼å¸ˆåˆ—è¡¨ -->
  <view class="teacher-list" wx:if="{{!loading && teachers.length > 0}}">
    <view class="teacher-item card card-padding" wx:for="{{teachers}}" wx:key="teacherId" bindtap="navigateToTeacherDetail" data-teacher-id="{{item.teacherId}}">
      <view class="teacher-avatar">
        <image class="avatar-image radius-circle" src="{{item.avatar}}" mode="aspectFill"></image>
      </view>
      <view class="teacher-info">
        <view class="teacher-header">
          <text class="teacher-name">{{item.name}}</text>
          <view class="teacher-rating">
            <text class="rating-stars">{{getRatingStars(item.rating)}}</text>
            <text class="rating-value">{{item.rating}}</text>
          </view>
        </view>
        <view class="teacher-dance-types">
          <text class="dance-type tag tag-primary" wx:for="{{item.danceTypes}}" wx:key="*this" wx:for-item="danceType">{{danceType}}</text>
        </view>
        <view class="teacher-specialties text-small">
          <text>{{i18n.t('teacher.specialties')}}ï¼š{{item.specialties.join('ã€')}}</text>
        </view>
        <view class="teacher-meta">
          <text class="meta-item">{{i18n.t('teacher.experience')}} {{item.experience}}</text>
          <text class="meta-item">{{i18n.t('teacher.courses')}} {{item.classCount}} {{i18n.t('teacher.sessions')}}</text>
        </view>
        <view class="teacher-intro text-small">
          <text>{{item.intro}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{!loading && teachers.length === 0}}">
    <view class="empty">
      <text class="empty-icon">ğŸ‘¨â€ğŸ«</text>
      <text class="empty-text">{{i18n.t('teacher.no.info')}}</text>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{!loading && hasMore}}">
    <view class="load-more-btn {{loadingMore ? 'loading' : ''}}" bindtap="loadMoreTeachers">
      <text wx:if="{{!loadingMore}}">{{i18n.t('teacher.load.more')}}</text>
      <text wx:else>{{i18n.t('text.loading')}}</text>
    </view>
  </view>

  <!-- æ²¡æœ‰æ›´å¤š -->
  <view class="no-more" wx:if="{{!loading && !hasMore && teachers.length > 0}}">
    <text class="no-more-text">{{i18n.t('teacher.no.more')}}</text>
  </view>
</view>