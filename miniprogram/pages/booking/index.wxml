<!-- booking/index.wxml -->
<view class="container">
  <!-- å¤´éƒ¨å¯¼èˆªæ  -->
  <view class="header-nav">
    <view class="nav-left">
      <view class="nav-btn" bindtap="switchStore">
        <text class="iconfont icon-store"></text>
        <text>{{switchStoreText}}</text>
      </view>
    </view>
    <view class="nav-center">
      <view class="nav-btn" bindtap="showQRCode">
        <text class="iconfont icon-qrcode"></text>
        <text>{{entranceCodeText}}</text>
      </view>
    </view>
    <view class="nav-right">
      <text class="page-title">{{bookingText}}</text>
    </view>
  </view>

  <!-- è¯¾ç¨‹ç±»åž‹ç­›é€‰ -->
  <view class="course-type-tabs">
    <view class="type-tab {{currentType === 'regular' ? 'active' : ''}}" bindtap="switchCourseType" data-type="regular">
      <text>{{regularCourseText}}</text>
    </view>
    <view class="type-tab {{currentType === 'private' ? 'active' : ''}}" bindtap="switchCourseType" data-type="private">
      <text>{{privateCourseText}}</text>
    </view>
    <view class="type-tab {{currentType === 'intensive' ? 'active' : ''}}" bindtap="switchCourseType" data-type="intensive">
      <text>{{intensiveCourseText}}</text>
    </view>
  </view>

  <!-- æ—¥æœŸé€‰æ‹© -->
  <view class="date-selector">
    <scroll-view scroll-x="true" class="date-scroll">
      <view class="date-item {{currentDate === item.date ? 'active' : ''}}" 
            wx:for="{{dateOptions}}" 
            wx:key="date"
            bindtap="selectDate" 
            data-date="{{item.date}}">
        <text class="date-week">{{item.week}}</text>
        <text class="date-day">{{item.day}}</text>
        <text class="date-month">{{item.month}}</text>
      </view>
    </scroll-view>
  </view>

  

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="course-list" wx:if="{{!loading && courses.length > 0}}">
    <view class="course-item" wx:for="{{courses}}" wx:key="courseId">
      <view class="course-time">
        <text class="time-range">{{item.startTime}}â€“{{item.endTime}}</text>
      </view>
      
      <view class="course-content">
        <view class="teacher-info">
          <image class="teacher-avatar" src="{{item.teacherAvatar}}" mode="aspectFill"></image>
          <text class="teacher-name">{{item.teacherName}}</text>
        </view>
        <view class="course-details">
          <text class="course-name">{{item.courseName}}</text>
          <text class="course-type">{{item.danceTypeName}}â€“{{item.courseLevel}}</text>
        </view>
      </view>
      
      <view class="booking-info">
        <view class="booking-status">
          <text class="booking-count">å·²é¢„çº¦{{item.bookedCount}}/{{item.capacity}}</text>
        </view>
        
        <!-- é¢„çº¦æŒ‰é’®æˆ–çŠ¶æ€æ ‡ç­¾ -->
        <view class="booking-action">
          <!-- å¯ä»¥é¢„çº¦ -->
          <block wx:if="{{item.canBook}}">
            <button class="book-btn" bindtap="bookCourse" data-course-id="{{item.courseId}}">
              {{bookText}}
            </button>
          </block>
          
          <!-- å·²æ»¡å‘˜ -->
          <block wx:elif="{{item.isFull}}">
            <view class="status-badge full">
              <text class="badge-icon">ðŸ‘¥</text>
              <text class="badge-text">{{fullyBookedText}}</text>
            </view>
          </block>
          
          <!-- ç´§å¼  -->
          <block wx:elif="{{item.isTense}}">
            <button class="book-btn" bindtap="bookCourse" data-course-id="{{item.courseId}}">
              é¢„çº¦
            </button>
            <view class="status-badge tense">
              <text class="badge-icon">ðŸ”¥</text>
              <text class="badge-text">{{tenseText}}</text>
            </view>
          </block>
          
          <!-- æœªå¼€æ”¾é¢„çº¦ -->
          <block wx:else>
            <view class="booking-time">
              <text>{{item.bookingOpenTime}}{{bookingOpenText}}</text>
            </view>
          </block>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading">
      <text>{{loadingText}}</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{!loading && courses.length === 0}}">
    <view class="empty">
      <text class="empty-icon">ðŸ“…</text>
      <text class="empty-text">{{noCoursesText}}</text>
      <button class="empty-action-btn" bindtap="navigateToCourseList">
        {{viewAllCoursesText}}
      </button>
    </view>
  </view>
</view>