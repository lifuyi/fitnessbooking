<!-- booking/index.wxml -->
<view class="container">
  <!-- å¤´éƒ¨å¯¼èˆªæ  -->
  <view class="header-nav">
    <view class="nav-left">
      <view class="nav-btn" bindtap="switchStore">
        <text class="iconfont icon-store"></text>
        <text>åˆ‡æ¢é—¨åº—</text>
      </view>
    </view>
    <view class="nav-center">
      <view class="nav-btn" bindtap="showQRCode">
        <text class="iconfont icon-qrcode"></text>
        <text>å…¥åœºç </text>
      </view>
    </view>
    <view class="nav-right">
      <text class="page-title">é¢„çº¦</text>
    </view>
  </view>

  <!-- è¯¾ç¨‹ç±»å‹ç­›é€‰ -->
  <view class="course-type-tabs">
    <view class="type-tab {{currentType === 'regular' ? 'active' : ''}}" bindtap="switchCourseType" data-type="regular">
      <text>å¸¸è§„è¯¾</text>
    </view>
    <view class="type-tab {{currentType === 'private' ? 'active' : ''}}" bindtap="switchCourseType" data-type="private">
      <text>ç§æ•™è¯¾</text>
    </view>
    <view class="type-tab {{currentType === 'intensive' ? 'active' : ''}}" bindtap="switchCourseType" data-type="intensive">
      <text>é›†è®­è¯¾</text>
    </view>
    <view class="filter-btn" bindtap="showFilter">
      <text>ç­›é€‰äº†</text>
    </view>
  </view>

  <!-- æ—¥æœŸé€‰æ‹© -->
  <view class="date-selector">
    <scroll-view scroll-x="true" class="date-scroll">
      <view class="date-item {{currentDate === item.date ? 'active' : ''}}" 
            wx:for="{{dateOptions}}" 
            wx:key="date"
            bindtap="selectDate" 
            data-date="{{item.date}}">
        <text class="date-week">{{item.week}}</text>
        <text class="date-day">{{item.day}}</text>
        <text class="date-month">{{item.month}}</text>
      </view>
    </scroll-view>
  </view>

  

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="course-list" wx:if="{{!loading && courses.length > 0}}">
    <view class="course-item" wx:for="{{courses}}" wx:key="courseId">
      <view class="course-time">
        <text class="time-range">{{item.startTime}}â€“{{item.endTime}}</text>
      </view>
      
      <view class="course-content">
        <view class="teacher-info">
          <image class="teacher-avatar" src="{{item.teacherAvatar}}" mode="aspectFill"></image>
          <text class="teacher-name">{{item.teacherName}}</text>
        </view>
        <view class="course-details">
          <text class="course-name">{{item.courseName}}</text>
          <text class="course-type">{{item.danceTypeName}}â€“{{item.courseLevel}}</text>
        </view>
      </view>
      
      <view class="booking-info">
        <view class="booking-status">
          <text class="booking-count">å·²é¢„çº¦{{item.bookedCount}}/{{item.capacity}}</text>
        </view>
        
        <!-- é¢„çº¦æŒ‰é’®æˆ–çŠ¶æ€æ ‡ç­¾ -->
        <view class="booking-action">
          <!-- å¯ä»¥é¢„çº¦ -->
          <block wx:if="{{item.canBook}}">
            <button class="book-btn" bindtap="bookCourse" data-course-id="{{item.courseId}}">
              é¢„çº¦
            </button>
          </block>
          
          <!-- å·²æ»¡å‘˜ -->
          <block wx:elif="{{item.isFull}}">
            <view class="status-badge full">
              <text class="badge-icon">ğŸ‘¥</text>
              <text class="badge-text">æ»¡å‘˜</text>
            </view>
          </block>
          
          <!-- ç´§å¼  -->
          <block wx:elif="{{item.isTense}}">
            <button class="book-btn" bindtap="bookCourse" data-course-id="{{item.courseId}}">
              é¢„çº¦
            </button>
            <view class="status-badge tense">
              <text class="badge-icon">ğŸ”¥</text>
              <text class="badge-text">ç´§å¼ </text>
            </view>
          </block>
          
          <!-- æœªå¼€æ”¾é¢„çº¦ -->
          <block wx:else>
            <view class="booking-time">
              <text>{{item.bookingOpenTime}}å¼€å§‹é¢„çº¦</text>
            </view>
          </block>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{!loading && courses.length === 0}}">
    <view class="empty">
      <text class="empty-icon">ğŸ“…</text>
      <text class="empty-text">æš‚æ— è¯¾ç¨‹</text>
      <button class="empty-action-btn" bindtap="navigateToCourseList">
        æŸ¥çœ‹å…¨éƒ¨è¯¾ç¨‹
      </button>
    </view>
  </view>
</view>