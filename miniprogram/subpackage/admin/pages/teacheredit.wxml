<view class="container">
  <form bindsubmit="submitForm">
    <!-- 头像上传 -->
    <view class="form-section">
      <view class="section-title">导师头像</view>
      <view class="avatar-upload" bindtap="chooseAvatar">
        <view class="avatar-wrapper">
          <image wx:if="{{teacher.avatar}}" src="{{typeof teacher.avatar === 'object' ? teacher.avatar.path : teacher.avatar}}" class="avatar" mode="aspectFill" />
          <view wx:else class="avatar-placeholder">
            <text class="avatar-icon">+</text>
            <text class="avatar-text">上传头像</text>
          </view>
          <view wx:if="{{uploadingAvatar}}" class="avatar-loading">
            <text>上传中...</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 基本信息 -->
    <view class="form-section">
      <view class="section-title">基本信息</view>
      
      <view class="form-item">
        <view class="form-label">姓名 *</view>
        <input 
          class="form-input" 
          placeholder="请输入导师姓名" 
          value="{{teacher.name}}"
          bindinput="onInputChange"
          data-field="name"
        />
      </view>
      
      <view class="form-item">
        <view class="form-label">手机号码 *</view>
        <input 
          class="form-input" 
          placeholder="请输入手机号码" 
          type="number"
          value="{{teacher.phone}}"
          bindinput="onInputChange"
          data-field="phone"
        />
      </view>
      
      <view class="form-item">
        <view class="form-label">经验年限 *</view>
        <input 
          class="form-input" 
          placeholder="请输入经验年限" 
          type="number"
          value="{{teacher.experience}}"
          bindinput="onInputChange"
          data-field="experience"
        />
      </view>
      
      <view class="form-item">
        <view class="form-label">评分</view>
        <view class="rating-wrapper">
          <view class="rating-stars">
            <view 
              class="star {{index < teacher.rating ? 'active' : ''}}"
              wx:for="{{5}}"
              wx:key="*this"
              bindtap="onRatingChange"
              data-index="{{index}}"
            >
              ★
            </view>
          </view>
          <text class="rating-text">{{teacher.rating}}分</text>
        </view>
      </view>
      
      <view class="form-item">
        <view class="form-label">状态</view>
        <switch 
          class="form-switch"
          checked="{{teacher.status === 'active'}}"
          bindchange="onStatusChange"
        />
        <text class="status-text">{{teacher.status === 'active' ? '启用' : '禁用'}}</text>
      </view>
    </view>

    <!-- 擅长舞种 -->
    <view class="form-section">
      <view class="section-title">擅长舞种 *</view>
      <checkbox-group bindchange="onDanceTypeChange">
        <view class="checkbox-group">
          <label 
            class="checkbox-item {{teacher.danceTypes.includes(item.id) ? 'checked' : ''}}"
            wx:for="{{filterOptions.danceTypes}}"
            wx:key="id"
          >
            <checkbox value="{{item.id}}" checked="{{teacher.danceTypes.includes(item.id)}}" />
            <text class="checkbox-text">{{item.name}}</text>
          </label>
        </view>
      </checkbox-group>
    </view>

    <!-- 所属门店 -->
    <view class="form-section">
      <view class="section-title">所属门店 *</view>
      <checkbox-group bindchange="onStoreChange">
        <view class="checkbox-group">
          <label 
            class="checkbox-item {{teacher.stores.includes(item.storeId) ? 'checked' : ''}}"
            wx:for="{{filterOptions.stores}}"
            wx:key="storeId"
          >
            <checkbox value="{{item.storeId}}" checked="{{teacher.stores.includes(item.storeId)}}" />
            <text class="checkbox-text">{{item.name}}</text>
          </label>
        </view>
      </checkbox-group>
    </view>

    <!-- 个人介绍 -->
    <view class="form-section">
      <view class="section-title">个人介绍</view>
      <textarea 
        class="form-textarea" 
        placeholder="请输入个人介绍" 
        maxlength="500"
        value="{{teacher.introduction}}"
        bindinput="onInputChange"
        data-field="introduction"
      ></textarea>
      <view class="textarea-counter">{{teacher.introduction.length}}/500</view>
    </view>

    <!-- 操作按钮 -->
    <view class="form-actions">
      <button class="btn btn-cancel" bindtap="goBack">取消</button>
      <button class="btn btn-primary" form-type="submit" loading="{{submitting}}">
        {{isEdit ? '更新' : '创建'}}
      </button>
    </view>
  </form>
</view>