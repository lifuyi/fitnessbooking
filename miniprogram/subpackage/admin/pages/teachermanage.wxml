<view class="container">
  <!-- 搜索和筛选区域 -->
  <view class="search-filter-section">
    <!-- 搜索框 -->
    <view class="search-bar">
      <view class="search-input-wrapper">
        <input 
          class="search-input" 
          placeholder="搜索导师姓名" 
          value="{{searchKeyword}}"
          bindinput="onSearchInput"
          bindconfirm="onSearchConfirm"
        />
        <view class="search-icons">
          <view class="search-clear" wx:if="{{searchKeyword}}" bindtap="onSearchClear">×</view>
          <view class="search-btn" bindtap="onSearchConfirm">搜索</view>
        </view>
      </view>
    </view>
    
    <!-- 筛选条件 -->
    <view class="filter-bar">
      <view class="filter-item" bindtap="showFilterPanel" data-type="storeId">
        <text class="filter-text">{{getFilterDisplayText('storeId')}}</text>
        <text class="filter-arrow">▼</text>
      </view>
      <view class="filter-item" bindtap="showFilterPanel" data-type="status">
        <text class="filter-text">{{getFilterDisplayText('status')}}</text>
        <text class="filter-arrow">▼</text>
      </view>
    </view>
  </view>

  <!-- 导师列表 -->
  <view class="teacher-list">
    <view class="teacher-item" wx:for="{{teachers}}" wx:key="teacherId">
      <view class="teacher-avatar">
        <image src="{{typeof item.avatar === 'object' ? item.avatar.path : item.avatar}}" mode="aspectFill" />
      </view>
      
      <view class="teacher-info">
        <view class="teacher-header">
          <text class="teacher-name">{{item.name}}</text>
          <view class="teacher-status {{getTeacherStatusClass(item.status)}}">
            {{getTeacherStatusText(item.status)}}
          </view>
        </view>
        
        <view class="teacher-meta">
          <view class="meta-item">
            <text class="meta-label">电话:</text>
            <text class="meta-value">{{item.phone}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-label">经验:</text>
            <text class="meta-value">{{item.experience}}年</text>
          </view>
          <view class="meta-item">
            <text class="meta-label">评分:</text>
            <text class="meta-value">{{item.rating}}</text>
          </view>
        </view>
        
        <view class="teacher-dance-types">
          <text class="dance-types-label">擅长:</text>
          <text class="dance-types">{{formatDanceTypes(item.danceTypes)}}</text>
        </view>
        
        <view class="teacher-stats">
          <text class="stat-item">授课{{item.classCount}}节</text>
        </view>
      </view>
      
      <view class="teacher-actions">
        <view class="action-btn edit-btn" bindtap="editTeacher" data-teacher-id="{{item.teacherId}}">
          编辑
        </view>
        <view class="action-btn status-btn" bindtap="updateTeacherStatus" data-teacher-id="{{item.teacherId}}" data-current-status="{{item.status}}">
          {{item.status === 'active' ? '禁用' : '启用'}}
        </view>
        <view class="action-btn delete-btn" bindtap="deleteTeacher" data-teacher-id="{{item.teacherId}}">
          删除
        </view>
      </view>
    </view>
    
    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{!loading && teachers.length === 0}}">
      <text class="empty-text">暂无导师数据</text>
    </view>
    
    <!-- 加载状态 -->
    <view class="loading-state" wx:if="{{loading}}">
      <text class="loading-text">加载中...</text>
    </view>
  </view>

  <!-- 悬浮添加按钮 -->
  <view class="fab" bindtap="createTeacher">
    <text class="fab-icon">+</text>
  </view>

  <!-- 筛选器弹窗 -->
  <view class="filter-modal" wx:if="{{showFilter}}" bindtap="hideFilterPanel">
    <view class="filter-panel" catchtap="">
      <view class="filter-header">
        <text class="filter-title">选择{{currentFilter === 'storeId' ? '门店' : '状态'}}</text>
        <view class="filter-close" bindtap="hideFilterPanel">×</view>
      </view>
      
      <view class="filter-options">
        <view 
          class="filter-option {{filters[currentFilter] === item.value ? 'active' : ''}}"
          wx:for="{{getFilterOptions(currentFilter)}}"
          wx:key="value"
          bindtap="selectFilterOption"
          data-value="{{item.value}}"
        >
          <text class="option-text">{{item.label}}</text>
          <view class="option-check" wx:if="{{filters[currentFilter] === item.value}}">✓</view>
        </view>
      </view>
    </view>
  </view>
</view>